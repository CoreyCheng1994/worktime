# 从接手系统到稳定交付：一条 AI 协作单链路实践

## 摘要
在当前项目中，我们并没有同时运行多套并行方法论，而是收敛为一条单链路：

`系统认知 -> 方案计划 -> 质量闸门 -> MVP交付 -> MCP调试回归 -> 扩展沉淀`

这条链路的核心价值不在“让 AI 写更多代码”，而在“让每一轮交付都可控、可验证、可复用”。

---

## 一、问题背景：为什么需要单链路方法

接手已有系统时，团队最常遇到的不是编码问题，而是协作失序问题：

- 需求一来就实现，系统还没看懂，后续返工频繁。
- 模块明明可复用，却因为没有统一判断机制被重复实现。
- 测试和评审后置，导致问题集中在合并前爆发。
- 改动完成后缺少证据链，调试和回归依赖个人经验。

这些问题叠加后，项目通常会出现两个后果：交付速度看似快，质量却越来越不稳定；团队人越多，协作成本越高。

所以我们把流程改成单链路，把“方向正确”和“验证充分”放到实现之前。

---

## 二、方法定义：单链路协作模型

### 2.1 设计初衷
单链路模型的目标是让每个阶段都只回答一个问题，并把阶段输出作为下一阶段输入，避免信息断层。

### 2.2 链路结构

| 阶段 | 主要目标 | 输出产物 |
|---|---|---|
| 系统认知 | 看懂主链路与风险 | 流程图、风险清单、复用候选 |
| 方案计划 | 决定复用/扩展/新写 | 推荐方案、边界、回滚策略 |
| 质量闸门 | 测试与评审前置 | 测试清单、阻断项、放行结论 |
| MVP交付 | 最小闭环验证方向 | MVP结果、测试证据、剩余风险 |
| MCP调试回归 | 证据化定位与修复 | 根因、补丁、回归结果 |
| 扩展沉淀 | 规模化与资产化 | 优先级计划、skill/rule更新 |

### 2.3 运行原则
- 不跳步：上一阶段未通过，不进入下一阶段。
- 不并行扩散：一轮只推进一个主目标。
- 不脱离证据：结论必须有测试或调试证据支撑。

---

## 三、核心机制：三件套如何在一条链路里协同

## 3.1 Browser MCP：事实层（看见问题）

Browser MCP 贯穿两端：前期用于系统摸底，后期用于故障复现与回归验证。

- 在认知阶段，它负责把页面流程、交互路径、接口行为从“感觉”变成“可观察事实”。
- 在调试阶段，它负责产出证据包（console、network、关键节点快照），让根因判断有依据。

结论：Browser MCP 的价值不是“自动点页面”，而是建立可复查的问题证据链。

## 3.2 Code Style Skills：结构层（复用与抽取）

Code Style Skills 用于回答一个关键问题：这次改动应不应该抽取、应不应该复用。

- 它扫描组件/模块重复实现。
- 它判断封装边界是否合理。
- 它给出“本轮做”与“下轮做”的抽取优先级。

结论：它不是为了强行抽象，而是为了降低长期重复开发成本。

## 3.3 Code Rule Skills：治理层（门禁与一致性）

Code Rule Skills 负责把质量从“人工感觉”变成“可执行规则”。

重点门禁包括：
- 动态类型逃逸（如 `any`、`@ts-ignore`、无边界 `unknown`）
- 超长代码与复杂度超阈值
- 命名规范一致性
- 关键逻辑注释覆盖率
- 关键路径日志覆盖率

结论：它的角色是合并前闸门，不是提交后提醒。

---

## 四、实践流程：一轮需求如何完整落地

下面是这条链路在一次真实需求中的运行方式。

### 4.1 阶段一：系统认知
先输入业务目标、代码范围和关注点，产出主链路、风险点、复用候选。  
这一步不写实现，只做“方向确认”。

### 4.2 阶段二：方案计划
基于阶段一结果，对比复用/扩展/新写三案。  
产出推荐方案、边界定义和回滚路径。

### 4.3 阶段三：质量闸门
先给出主流程、边界、失败流测试，再做实现前评审。  
若有阻断项，停止进入开发。

### 4.4 阶段四：MVP交付
只实现最小闭环，不做范围外扩写。  
产出 MVP 结果和必要测试证据。

### 4.5 阶段五：MCP调试回归
出现异常时，按证据链定位根因，执行最小修复并回归验证。  
高风险动作升级人工，不自动放行。

### 4.6 阶段六：扩展与沉淀
在 MVP 稳定后扩展功能，并把本轮经验沉淀到 skill 与 rule。  
目标是下一轮更快，而不是下一轮更复杂。

---

## 五、质量口径：如何判断这条链路是否有效

为了避免“看起来不错”，我们给出可执行口径：

- 动态类型违规数：`= 0`
- 超长函数违规数：`= 0`
- 命名规范违规数：`= 0`
- 关键模块注释覆盖率：`>= 90%`
- 关键路径日志覆盖率：`>= 95%`
- MVP 必要测试通过率：`= 100%`

这些指标不是 KPI 展示项，而是放行门禁项。

---

## 六、经验与边界：什么时候必须人工接管

单链路强调自动化，但不是“全部自动化”。以下场景必须人工接管：

- 涉及数据迁移或不可逆变更。
- 涉及权限、安全策略调整。
- 连续自动修复失败，且根因不收敛。
- 跨模块协议改动，可能影响多个上下游。

原则很简单：低风险问题自动闭环，高风险问题人工决策。

---

## 七、结语

这套实践最关键的一点是“收敛”。

不是增加更多方法，而是把方法收敛成一条可以反复执行的链路；
不是追求 AI 产出量，而是追求每轮交付的确定性。

对当前项目而言，最契合的不是“更多框架”，而是把 `Browser MCP + Code Style Skills + Code Rule Skills` 嵌入同一条交付链，让每次需求都沿着同样的工程路径落地。
